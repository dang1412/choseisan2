<div class="answer_event" id="answer_event" data-ng-controller="answerEventController">

  <div class="event-name">{{vm.eventData.eventName}}</div>
  <div class="event-des">{{vm.eventData.eventDescription}}</div>
  <table class="table">
    <thead>
      <tr>
        <th>Dates</th>
        <th data-ng-repeat="user in vm.users" class="name-header" data-ng-click="pickUser($index)" data-toggle="modal" data-target="#answerModal">{{user.name}}</th>
      </tr>
    </thead>
    <tr data-ng-repeat="date in vm.eventData.dates">
      <td>{{date}}</td>
      <td data-ng-repeat="user in vm.users">{{user.answers[$parent.$index].ans}}</td>
    </tr>
  </table>
  <button class="btn btn-default" data-toggle="modal" data-target="#answerModal">Answer</button>

  <!-- modal -->
  <div class="modal fade" id="answerModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h4 class="modal-title" id="exampleModalLabel">{{vm.eventName}}</h4>
        </div>
        <div class="modal-body">
          <form>
            <div class="form-group">
              <label for="attender-name" class="control-label">Name</label>
              <input type="text" class="form-control" id="attender-name" data-ng-model="vm.pickingUser.name">
            </div>
            <label class="control-label">Answers</label>
            <div class="form-group" data-ng-repeat="date in vm.eventData.dates">
              <div class="row">

                <div class="col-sm-4 answer-date">
                  {{date}}
                </div>

                <div class="col-sm-4 answer-check">
                  <label class="radio-inline">
                    <input type="radio" name="{{'date_' + $index}}" data-ng-model="vm.pickingUser.answers[$index].ans" value=0> 1
                  </label>
                  <label class="radio-inline">
                    <input type="radio" name="{{'date_' + $index}}" data-ng-model="vm.pickingUser.answers[$index].ans" value=1> 2
                  </label>
                  <label class="radio-inline">
                    <input type="radio" name="{{'date_' + $index}}" data-ng-model="vm.pickingUser.answers[$index].ans" value=2> 3
                  </label>
                </div>

                <div class="col-sm-4 answer-note">
                  <div class="form-group">
                    <textarea class="form-control" id="date-{{$index}}-note" data-ng-model="vm.pickingUser.answers[$index].note"></textarea>
                  </div>
                </div>

              </div>
            </div>
            <div class="form-group">
              <label for="attender-notes" class="control-label">Notes</label>
              <textarea class="form-control" id="attender-notes" data-ng-model="vm.pickingUser.notes"></textarea>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal" data-ng-click="upsertUser()">Answer</button>
        </div>
      </div>
    </div>
  </div>
  <!-- end modal -->
</div>
